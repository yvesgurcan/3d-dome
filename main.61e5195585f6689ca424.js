(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e){e.exports=JSON.parse('{"name":"3d-dome","description":"🐟 It\'s 3D and it\'s beautiful.","version":"0.0.64","license":"MIT","author":"Yves Gurcan","repository":{"type":"git","url":"https://github.com/yvesgurcan/3d-dome"},"main":"index.js","scripts":{"start":"npm run network-info; webpack-dev-server","build":"webpack --mode production","postversion":"npm run build && git add . && git commit -m \'New build\' && git push","network-info":"echo \\"ℹ ｢wds｣ Running on local network at http:/\\" | tr \\"\\n\\" \\"/\\"; ifconfig | grep \\"inet \\" | grep -Fv 127.0.0.1 | awk \'{print $2}\'"},"devDependencies":{"@babel/core":"^7.11.1","@babel/plugin-proposal-class-properties":"^7.10.4","@babel/plugin-transform-runtime":"^7.11.0","@babel/preset-env":"^7.11.0","@babel/preset-react":"^7.10.4","@types/react":"^16.9.43","@types/react-dom":"^16.9.8","@types/react-router-dom":"^5.1.5","@types/styled-components":"^5.1.2","babel-loader":"^8.1.0","babel-plugin-styled-components":"^1.11.1","clean-webpack-plugin":"^3.0.0","html-webpack-plugin":"^4.3.0","react":"^16.13.1","react-dom":"^16.13.1","react-router":"^5.2.0","react-router-dom":"^5.2.0","styled-components":"^5.1.1","ts-loader":"^8.0.1","typescript":"^3.9.7","webpack":"^4.44.1","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.0","workbox-webpack-plugin":"^5.1.3"},"dependencies":{"eruda":"^2.3.3","react-three-fiber":"^4.2.20","three":"^0.119.1","three-js-csg-es6":"^73.0.0"}}')},61:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(27),i=n.n(a),c=n(16),s=n(3),l=n(17),u=n(28),m=n.n(u),d=n(21),p=n.n(d),b=n(29),h=n.n(b),g=n(18),f=n.n(g),v=n(5),w=n(30),y=n.n(w),E=n(8);function k(){var e=y()(["\nbody {\n    font-family: sans-serif;\n    margin: 0;\n}\n\nhtml,\nbody,\n#root {\n    width: 100%;\n    height: 100%;\n}\n\na {\n    text-decoration: none;\n    color: white;\n    font-weight: bold;\n\n    :hover {\n        color: black;\n    }\n}\n"]);return k=function(){return e},e}var j=Object(E.a)(k()),O=E.b.div.withConfig({displayName:"PermissionScreen",componentId:"sc-1svkdm1-0"})(["width:100vw;height:100vh;background:black;display:flex;justify-content:center;align-items:center;color:white;"]),P=n(10),x=n.n(P),I=function(e){var t=Object(r.useRef)(),n=Object(v.e)().setDefaultCamera;return Object(r.useEffect)((function(){n(t.current)}),[]),Object(v.c)((function(){t.current.updateMatrixWorld()})),o.a.createElement("perspectiveCamera",x()({ref:t},e))},M=n(12),C=n.n(M),S=n(38);Object(v.b)({OrbitControls:S.a});var R=function(e){var t=e.autoRotate,n=void 0!==t&&t,a=e.delayRotation,i=e.target,c=void 0===i?[1,.08,0]:i,s=C()(e,["autoRotate","delayRotation","target"]),l=Object(r.useRef)(),u=Object(v.e)(),m=u.camera,d=u.gl;return Object(v.c)((function(){a||l.current.update()})),o.a.createElement("orbitControls",x()({enabled:!0,enableDamping:!0,enablePan:!0,keyPanSpeed:40,ref:l,args:[m,d.domElement],rotateSpeed:.5,dampingFactor:1,autoRotate:n,target:c},s))},z=function(){return o.a.createElement(R,{enableZoom:!1,keys:{LEFT:37,RIGHT:39},minAzimuthAngle:Math.PI,maxAzimuthAngle:0,minPolarAngle:Math.PI/2.3,maxPolarAngle:Math.PI/1.5})},A=n(39);Object(v.b)({DeviceOrientationControls:A.a});var L=function(){var e=Object(r.useRef)(),t=Object(v.e)().camera;return Object(r.useEffect)((function(){return e.current.connect(),function(){e.current.disconnect()}}),[]),Object(v.c)((function(n){var r=n.gl,o=n.scene;e.current.update(),r.render(o,t)})),o.a.createElement("deviceOrientationControls",{ref:e,args:[t]})},D=n(1),T=n(23),G=function(){var e=Object(r.useMemo)((function(){var e=new D.Mesh(new D.CylinderGeometry(6,6,20,60,4)),t=new D.Mesh(new D.CylinderGeometry(5,5,20,60,4)),n=new T.a(t),r=new T.a(e).subtract(n).toMesh();r.material=new D.MeshPhongMaterial({specular:1710618,shininess:30,flatShading:D.FlatShading});var o=(new D.TextureLoader).load("https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/metal.jpg");return r.material.map=o,r.position.y=9.48,r}));return o.a.createElement("primitive",{object:e})},N=function(){return o.a.createElement("mesh",{position:[.5,-.35,0]},o.a.createElement("cylinderGeometry",{attach:"geometry",args:[.3,.3,.25,100]}),o.a.createElement("meshPhongMaterial",{attach:"material",color:"rgb(40, 40, 40)",roughness:.5,opacity:1,transparent:!1}))},q=n(40);function F(e){var t=e.to,n=void 0===t?"/triforce":t,a=Object(r.useRef)(0),i=Object(v.d)(q.a,"https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/triforce/scene.gltf");return i.scene.scale.set(.007,.007,.007),Object(v.c)((function(){i.scene.rotation.y+=.02,0===a.current?a.current=200:(a.current>100?i.scene.position.y=i.scene.position.y-200/3e5:i.scene.position.y=i.scene.position.y+200/3e5,a.current=a.current-1)})),o.a.createElement("mesh",{rotation:[0,Math.PI/2,0],onClick:function(){return window.appHistory.push(n)},onPointerUp:function(){return window.appHistory.push(n)}},o.a.createElement("primitive",{object:i.scene,position:[0,0,.5]}))}var H,B=function(){return o.a.createElement(r.Suspense,{fallback:null},o.a.createElement(F,null))},J=function(e){e.color;var t=e.position,n=void 0===t?[0,0,0]:t,r=e.dimension,a=void 0===r?[0,0,0]:r,i=C()(e,["color","position","dimension"]);return o.a.createElement("mesh",x()({position:n},i),o.a.createElement("boxBufferGeometry",{attach:"geometry",args:a}),o.a.createElement("meshPhongMaterial",{attach:"material",color:"rgb(35, 35, 35)",roughness:.5,opacity:1,transparent:!1}))},_=function(){return o.a.createElement("mesh",{position:[0,-.5001,0],rotation:[Math.PI/2,0,0]},o.a.createElement("circleGeometry",{attach:"geometry",args:[6,32]}),o.a.createElement("meshPhongMaterial",{attach:"material",color:"rgb(46, 46, 46)",metalness:1,specular:1710618,shininess:100,side:D.DoubleSide}))},U=function(){var e=Object(r.useState)(!1),t=f()(e,2),n=t[0],a=t[1],i=Object(r.useState)(!0),c=f()(i,2),s=c[0],l=c[1],u=Object(r.useState)(),m=f()(u,2),d=m[0],b=m[1];function g(){return(g=h()(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&console.error("Device orientation permissions can not be set on localhost (not secure). Sorry!"),"function"==typeof L.requestPermission){e.next=8;break}if(!navigator.userAgent.toLowerCase().includes("android")){e.next=8;break}return console.info("Android device detected. Permission granted by default."),b("granted"),e.abrupt("return");case 8:return e.next=10,DeviceOrientationEvent.requestPermission();case 10:t=e.sent,console.info({permission:t}),b(t),localStorage.setItem("3d-dome-orientationPermission",t),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("An error occurred while setting device orientation permission. Permission denied."),console.error({error:e.t0}),b("denied"),localStorage.setItem("3d-dome-orientationPermission","denied");case 22:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e;(e=localStorage.getItem("3d-dome-orientationPermission"))&&b(e),l(!1)}),[]),Object(r.useEffect)((function(){a(function(){if("localhost"===location.hostname)return console.info("This is localhost."),!0;return console.info("This is not localhost."),!1}())}),[]),s?o.a.createElement(O,null,o.a.createElement(j,null),"Loading..."):d?o.a.createElement("span",null,o.a.createElement(j,null),o.a.createElement(v.a,{style:{background:"rgb(140, 140, 255)"}},o.a.createElement(I,{position:[0,0,0]}),"denied"!==d?null:n?o.a.createElement(R,null):o.a.createElement(z,null),"granted"===d&&o.a.createElement(L,null),o.a.createElement("group",{position:[4,0,0],rotation:[0,-Math.PI,0]},o.a.createElement("ambientLight",{intensity:.85}),o.a.createElement("spotLight",{color:"white",intensity:.5,position:[-20,20,-5]}),o.a.createElement("directionalLight",{color:"white",intensity:.1,position:[-2,9,0]}),o.a.createElement("directionalLight",{color:"white",intensity:.2,position:[7,-3,-5]}),o.a.createElement("directionalLight",{color:"white",intensity:.1,position:[10,6,5]}),o.a.createElement(N,null),o.a.createElement(B,null),o.a.createElement(J,{position:[1.25,0,1.5],dimension:[.1,1,.6],rotation:[0,Math.PI/4,0]}),o.a.createElement(J,{position:[1.25,0,-1.5],dimension:[.1,1,.6],rotation:[0,-Math.PI/4,0]}),o.a.createElement(J,{position:[-1.5,0,-1.25],dimension:[.1,1,.6],rotation:[0,-Math.PI/8,0]}),o.a.createElement(J,{position:[-1.5,0,1.25],dimension:[.1,1,.6],rotation:[0,Math.PI/8,0]}),o.a.createElement(_,null),o.a.createElement(G,null)))):o.a.createElement(O,null,o.a.createElement(j,null),o.a.createElement("button",{onClick:function(){return g.apply(this,arguments)}},"Enable access device orientation"))},V=E.b.div.withConfig({displayName:"MenuOverlay",componentId:"ril51u-0"})(["position:absolute;top:0;left:0;padding:3rem;width:100vw;height:100vh;box-sizing:border-box;color:white;z-index:",";"],(function(e){return e.zIndex})),W=E.b.div.withConfig({displayName:"MenuContent",componentId:"t058qg-0"})(["background:",";padding:3rem;width:100%;height:100%;box-sizing:border-box;border-radius:50px;"],(function(e){return e.backgroundColor})),Y=function(){return o.a.createElement("model-viewer",{src:"https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/triforce2/scene.gltf","ios-src":"https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/triforce.usdz","ar-modes":"webxr scene-viewer quick-look",ar:!0,"auto-rotate":!0,"camera-controls":!0})},Z=E.b.div.withConfig({displayName:"TriforceModal__CenteredViewer",componentId:"k0zb01-0"})(["display:flex;justify-content:center;align-items:center;height:100%;"]),$=E.b.div.withConfig({displayName:"ToolOverlay",componentId:"sc-1dx71zy-0"})(["position:absolute;bottom:1rem;left:1rem;color:white;z-index:9999;"]),K=document.getElementById("root");H=document.createElement("div"),document.body.appendChild(H),m.a.init({container:H,tool:["console","elements"]}),console.info(l.name,l.version),i.a.render(o.a.createElement(c.a,null,o.a.createElement($,null,l.version," ",o.a.createElement("button",{onClick:function(){localStorage.removeItem("3d-dome-orientationPermission"),window.location.reload()}},"Reset permissions")),o.a.createElement(s.a,{component:function(e){var t=e.history;return window.appHistory=t,"/ar"===t.location.pathname?null:o.a.createElement(U,null)}}),o.a.createElement(s.a,{path:"/triforce",component:function(){return o.a.createElement(V,null,o.a.createElement(W,{backgroundColor:"rgb(0, 168, 224, 0.75)"},o.a.createElement(c.b,{to:"/"},"Back"),o.a.createElement(Z,null,o.a.createElement(Y,null))))}}),o.a.createElement(s.a,{path:"/ar",component:function(){return o.a.createElement("model-viewer",{src:"https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/triforce2/scene.gltf","auto-rotate":!0,"camera-controls":!0,ar:!0,"ar-modes":"webxr scene-viewer quick-look","ar-scale":"auto","ios-src":"https://raw.githubusercontent.com/yvesgurcan/3d-dome/master/public/triforce.usdz"})}})),K)}},[[61,1,2]]]);